-traversy gist
Firebase Setup For House Marketplace

    Create Firebase Project
    Create "web" app within firebase to get config values"
    Install firebase in your project "npm i firebase
    Create a config file in your project
    Add authentication for email/password and Google
    Create a user from Firebase
    Enable Firestore
    Add rules for firestore
    Enable storage
    Add rules for storage
    Create 3 composite indexes for advanced querying

- the signed in users are listed in the authentication tab
- CEL (Common Expression Language)
- Firebase rules:
?(Gist: gist.github.com/bradtraversy)
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Listings
    match /listings/{listing} {
    	allow read;
      allow create: if request.auth != null && request.resource.data.imgUrls.size() < 7;
    	allow delete: if resource.data.userRef == request.auth.uid;
      allow update: if resource.data.userRef == request.auth.uid;
    }
   
    // Users
    match /users/{user} {
    	allow read;
    	allow create;
    	allow update: if request.auth.uid == user
    }
  }
}

- Storage rules:
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read;
      allow write: if
      request.auth != null &&
      request.resource.size < 2 * 1024 * 1024 && //2MB
      request.resource.contentType.matches('image/.*')
    }
  }
}

- with the noSQL database I dont have to beforehand create the relational database tables, columns and fields

- version 6.0 in react-router-dom we use 'Router' instead of 'Switch'
- also we use 'element' instead of 'component' in the routes

84
- in SignIn.jsx in setFormData() I have to use a callback (prev)=>({...prev, }) because otherwise after all typed characters the state would be renewed, so to store a whole word in the state I have to ...spread the previous state
- The second parenthesis are for the return of the object 

88
- React Toastify
https://github.com/fkhadra/react-toastify
- I have to import it in App.js

89
- If we are logged in and refresh the page the site will tell us that we are 'not logged in' because the site is rendered before getting the data from firebase
- It could be avoided by creating private routes

90
- 'changeDetails' is basically a button which enables the form to show

91
- gitignore not working solution:
(git rm --cached system/application/config/config.php modules/recaptcha/config/recaptcha.php)
- React-router 6 changed a lot of things
- 'CTRL + P' opens settings.json
- in PrivateRoute.jsx we bring in 'Navigate' not 'useNavigate' the hook but what was the old 'Redirect' component, and we also bring in 'Outlet' which allows us to use childElements
- Outlet is whatever happens to be in the PrivateRoute child component
- This workflow is because of the <Routes/> component
- in the custom hook useAuthStatus.js 'onAuthStateChanged' is fires of when the authentication state is changes
- checkingStatus is true until we check in than is set to false (like 'loading..') and also during the truthy state we show a spinner
- cleanup memoryleak with useRef()

94
- with useParams I can use the and of the url like from '/categories/rent' rent
- the name in the 'useParams' object will be the exact name that I gave in the App.js, where I connected the <Category/> component 
- If I use async - await in a useEffect hook I have to use another function inside of the useEffect, because the first function can't be async
- 'listingsRef going to be a reference to the collection not the document

98
  - we use 'useRef' for doing the 'isMounted' thing to avoiding the memory leak warning

99
  - the form for listing will be created mostly by forms
  - in the button html element the 'id' is important because when we set out state on the onChange or onClick's its going to look for the id to be the key
  - be sure to match this to whatever the piece of state is
  - in the form 'onChange' and 'onClick' also calls onMutate()
  - nullish coalescing operator: ?? if the value on the left is null than use this value

100
  - if I use the geoapify third party api then when I fill out the latitude and longitude varibles, I have to use a '?' after data.features[0]?.geometry
  - geoapify:
  https://myprojects.geoapify.com/api/nCASbjXRwZmMMiMdLRVq/keys

102
  - Save listings to firestore

104
  - display listing as we click on one 
  - we use 'auth' because we want to show a 'Connect' button when another user show our data

105
  - in the 'Listing' page I create a 'share' icon in order to the user could copy and share the link with his/her friends

106
  - if the function is async in the 'useEffect' then we have to create inside useEffect an async function

107
  - 'leaflets' is an opensource javascript library
  - leaflets.com/examples/quick-start

108
  - slideshow with swiper
  - 'A11y' is the accessebility module
  - We can import the scc directly
  - In the SwiperSlide we use the images as background

109
  - Export Slider
  - to enable the modules for swiper: SwiperCore.module([Navigation, Pagination, Scrollbar, A11y])
  - ${data.discountPrice ?? data.regularPrice} is equal to : {data.offer? 'Discount: $'+ data.discountPrice: 'Price: $'+data.regularPrice }

111
  - @TODO - without more listing 'Load More' paragraph should be invisible

112
  - Edit listing



// Protected routes in v6
// https://stackoverflow.com/questions/65505665/protected-route-with-firebase

// Fix memory leak warning
// https://stackoverflow.com/questions/59780268/cleanup-memory-leaks-on-an-unmounted-component-in-react-hooks


















https://github.com/bradtraversy/house-marketplace